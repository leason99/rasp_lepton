<html>
  <head>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      
    <title>Video Streaming Demonstration</title>
    <script type=text/javascript>
      function tempture (){
        $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
       
        
  
        $.getJSON($SCRIPT_ROOT+"/tempture",
            function(data) {
                $("#maxTempture").text("Max: "+data.tempture.max)
                $("#minTempture").text("Min: "+data.tempture.min)
                $("#aveTempture").text("Ave: "+data.tempture.ave)

            });

        
        
    }
    setInterval(tempture, 100);
    </script>
  </head>
  <body>
   

    <h1>Video Streaming Demonstration</h1>
    <img src="{{ url_for('video_feed') }}">
    <h1 id=maxTempture> mmd;samdlmas;lda;smd </h1>
    <h1 id=minTempture> mmd;samdlmas;lda;smd </h1>
    <h1 id=aveTempture> mmd;samdlmas;lda;smd </h1>
    <script type=text/javascript>
    var audio = new Audio('../audio/alert.mp3');
    function notifyMe() {
      // 检查浏览器是否支持 Notification
      if (!("Notification" in window)) {
          alert("你的不支持 Notification!  TAT");
      }
  
      // 检查用户是否已经允许使用通知
      else if (Notification.permission === "granted") {
          // 创建 Notification
          
          audio.play();

          var notification = new Notification("Hey guy!");
          notification.iconurl = 'http://img.hacpai.com/avatar/1450241301546-260.jpg?1451971807339';
          autoClose(notification);
  
      }
  
      // 重新发起请求，让用户同意使用通知
      else if (Notification.permission !== 'denied') {
          Notification.requestPermission(function (permission) {
  
              // 用户同意使用通知
              if (!('permission' in Notification)) {
                  Notification.permission = permission;
              }
  
              if (permission === "granted") {
                  // 创建 Notification
                  var notification = new Notification("Hey guy!");
              }
          });
      }
  
      // 注意：如果浏览器禁止弹出任何通知，将无法使用
  }
  
  function autoClose(notification) {
      if (typeof notification.time === 'undefined' || notification.time <= 0) {
          notification.close();
      } else {
          setTimeout(function () {
              notification.close();
          }, notification.time);
      }
  
      notification.addEventListener('click', function () {
          notification.close();
      }, false)
  }
</script>
   
    <button onclick="notifyMe()">Notify me!</button>
    
    
  </body>
</html>
